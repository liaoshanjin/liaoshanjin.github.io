<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Hugo 0.75.1" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="特污兔" />
  <meta property="og:url" content="https://liaoshanjin.github.io/mysql/mysql-common-commands/" />
  <link rel="canonical" href="https://liaoshanjin.github.io/mysql/mysql-common-commands/" /><link rel="alternate" type="application/atom+xml" href="https://liaoshanjin.github.ioindex.xml" title="特污兔的博客">

  <script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/liaoshanjin.github.io"
      },
      "articleSection" : "mysql",
      "name" : "Mysql 常用命令整理",
      "headline" : "Mysql 常用命令整理",
      "description" : "目录  一. 表操作  1. 创建数据库 2. 创建表 3. 查看表结构 4. 修改表名 5. 添加字段 6. 删除字段 7. 修改字段属性 8. 添加索引 9. 删除索引 10. 查看索引   二. 常用SQL语句  1. date_format日期转换 2. 联表查询   三. 用户管理与授权管理   1. 创建用户 2. 查看用户信息 3. 授权 4. 查看用户授权信息 5. 设置与更改用户密码 6. 撤销用户权限 7. 删除用户   四. 空间统计命令   1. 查看各个数据库的数据大小 2. 查看指定数据库下每个表的数据大小 3. 查看指定数据库的某个表的数据大小   五. 重复数据处理   1.",
      "inLanguage" : "en-US",
      "author" : "特污兔",
      "creator" : "特污兔",
      "publisher": "特污兔",
      "accountablePerson" : "特污兔",
      "copyrightHolder" : "特污兔",
      "copyrightYear" : "2020",
      "datePublished": "2020-06-27 18:20:00 \u002b0800 CST",
      "dateModified" : "2020-06-27 18:20:00 \u002b0800 CST",
      "url" : "https:\/\/liaoshanjin.github.io\/mysql\/mysql-common-commands\/",
      "keywords" : [  ]
  }
</script>
<title>Mysql 常用命令整理 - 特污兔的博客</title>
  <meta property="og:title" content="Mysql 常用命令整理 - 特污兔的博客" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="目录  一. 表操作  1. 创建数据库 2. 创建表 3. 查看表结构 4. 修改表名 5. 添加字段 6. 删除字段 7. 修改字段属性 8. 添加索引 9. 删除索引 10. 查看索引   二. 常用SQL语句  1. date_format日期转换 2. 联表查询   三. 用户管理与授权管理   1. 创建用户 2. 查看用户信息 3. 授权 4. 查看用户授权信息 5. 设置与更改用户密码 6. 撤销用户权限 7. 删除用户   四. 空间统计命令   1. 查看各个数据库的数据大小 2. 查看指定数据库下每个表的数据大小 3. 查看指定数据库的某个表的数据大小   五. 重复数据处理   1." />
  <meta name="description" content="目录  一. 表操作  1. 创建数据库 2. 创建表 3. 查看表结构 4. 修改表名 5. 添加字段 6. 删除字段 7. 修改字段属性 8. 添加索引 9. 删除索引 10. 查看索引   二. 常用SQL语句  1. date_format日期转换 2. 联表查询   三. 用户管理与授权管理   1. 创建用户 2. 查看用户信息 3. 授权 4. 查看用户授权信息 5. 设置与更改用户密码 6. 撤销用户权限 7. 删除用户   四. 空间统计命令   1. 查看各个数据库的数据大小 2. 查看指定数据库下每个表的数据大小 3. 查看指定数据库的某个表的数据大小   五. 重复数据处理   1." />
  <meta property="og:locale" content="zh_CN" />

  <link rel="stylesheet" href="/css/flexboxgrid-6.3.1.min.css" />
  <link rel="stylesheet" href="/css/github-markdown.css" />
  <link rel="stylesheet" href="/css/highlight/tomorrow.min.css" />
  <link rel="stylesheet" href="/css/index.css">
  <link href="/index.xml" rel="alternate" type="application/rss+xml"
    title="特污兔的博客">
  
  <link href="https://fonts.googleapis.com/css?family=Arvo|Permanent+Marker|Bree+Serif" rel="stylesheet">
  
  

  
</head>

<body>
  <article class="post " id="article">
    <div class="row">
      <div class="col-xs-12">
        <div class="site-header">
          
<header>
  <div class="signatures site-title">
    <a href="/">Stringer的博客</a>
  </div>
</header>
<div class="row end-xs">
  
  
</div>
<div class="header-line"></div>

        </div>
        <header class="post-header">
          <h1 class="post-title">Mysql 常用命令整理</h1>
          
          <div class="row post-desc">
            <div class="col-xs-6">
              
              <time class="post-date" datetime="2020-06-27 18:20:00 CST">
                27 Jun 2020
              </time>
              
            </div>
            <div class="col-xs-6">
              
              <div class="post-author">
                <a target="_blank" href="https://liaoshanjin.github.io/">@特污兔</a>
              </div>
              
            </div>
          </div>
          
        </header>

        <div class="post-content markdown-body">
          
          <h1 id="目录">目录</h1>
<ul>
<li>一. <a href="#1">表操作</a>
<ul>
<li><a href="#1.1">1. 创建数据库</a></li>
<li><a href="#1.2">2. 创建表</a></li>
<li><a href="#1.3">3. 查看表结构</a></li>
<li><a href="#1.4">4. 修改表名</a></li>
<li><a href="#1.5">5. 添加字段</a></li>
<li><a href="#1.6">6. 删除字段</a></li>
<li><a href="#1.7">7. 修改字段属性</a></li>
<li><a href="#1.8">8. 添加索引</a></li>
<li><a href="#1.9">9. 删除索引</a></li>
<li><a href="#1.10">10. 查看索引</a></li>
</ul>
</li>
<li><a href="#2">二. 常用SQL语句</a>
<ul>
<li><a href="#2.1">1. date_format日期转换</a></li>
<li><a href="#2.2">2. 联表查询</a></li>
</ul>
</li>
<li><a href="#3">三. 用户管理与授权管理 </a>
<ul>
<li><a href="#3.1">1. 创建用户</a></li>
<li><a href="#3.2">2. 查看用户信息</a></li>
<li><a href="#3.3">3. 授权</a></li>
<li><a href="#3.4">4. 查看用户授权信息</a></li>
<li><a href="#3.5">5. 设置与更改用户密码</a></li>
<li><a href="#3.6">6. 撤销用户权限</a></li>
<li><a href="#3.7">7. 删除用户</a></li>
</ul>
</li>
<li><a href="#4">四. 空间统计命令 </a>
<ul>
<li><a href="#4.1">1. 查看各个数据库的数据大小</a></li>
<li><a href="#4.2">2. 查看指定数据库下每个表的数据大小</a></li>
<li><a href="#4.3">3. 查看指定数据库的某个表的数据大小</a></li>
</ul>
</li>
<li><a href="#5">五. 重复数据处理 </a>
<ul>
<li><a href="#5.1">1. 根据单个字段查找表中重复记录</a></li>
<li><a href="#5.2">2. 根据单个字段查找表中重复记录，并删除保留1个</a></li>
<li><a href="#5.3">3. 根据多个字段查找表中重复记录</a></li>
<li><a href="#5.4">4. 根据多个字段查找表中重复记录，并删除保留1个</a></li>
</ul>
</li>
<li><a href="#6">六. 重复数据处理 </a>
<ul>
<li><a href="#6.1">1. 备份</a></li>
<li><a href="#6.2">2. 恢复</a></li>
</ul>
</li>
</ul>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->一. 表操作<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --> 1. 创建数据库<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">database</span> <span style="color:#960050;background-color:#1e0010">数据库名称</span>;
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 2. 创建表<!-- raw HTML omitted --><!-- raw HTML omitted -->
例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#f92672">`</span>users<span style="color:#f92672">`</span> (
  <span style="color:#f92672">`</span>id<span style="color:#f92672">`</span> <span style="color:#66d9ef">int</span>(<span style="color:#ae81ff">10</span>) <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">AUTO_INCREMENT</span>,
  <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span> <span style="color:#66d9ef">varchar</span>(<span style="color:#ae81ff">50</span>) <span style="color:#66d9ef">COLLATE</span> utf8mb4_unicode_ci <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> COMMENT <span style="color:#e6db74">&#39;昵称&#39;</span>,
  <span style="color:#f92672">`</span>avatar<span style="color:#f92672">`</span> <span style="color:#66d9ef">varchar</span>(<span style="color:#ae81ff">255</span>) <span style="color:#66d9ef">COLLATE</span> utf8mb4_unicode_ci <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> COMMENT <span style="color:#e6db74">&#39;头像&#39;</span>,
  <span style="color:#f92672">`</span>status<span style="color:#f92672">`</span> <span style="color:#66d9ef">tinyint</span>(<span style="color:#ae81ff">4</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;1&#39;</span> COMMENT <span style="color:#e6db74">&#39;状态是否激活 0:禁用  1:激活&#39;</span>,
  <span style="color:#f92672">`</span>created_at<span style="color:#f92672">`</span> <span style="color:#66d9ef">timestamp</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span>,
  <span style="color:#f92672">`</span>updated_at<span style="color:#f92672">`</span> <span style="color:#66d9ef">timestamp</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span>,
  <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (<span style="color:#f92672">`</span>id<span style="color:#f92672">`</span>)
) <span style="color:#66d9ef">ENGINE</span><span style="color:#f92672">=</span>InnoDB <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">CHARSET</span><span style="color:#f92672">=</span>utf8mb4 <span style="color:#66d9ef">COLLATE</span><span style="color:#f92672">=</span>utf8mb4_unicode_ci;
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 3. 查看表结构<!-- raw HTML omitted --><!-- raw HTML omitted -->
第一种命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">DESC</span> <span style="color:#960050;background-color:#1e0010">表名称</span>;
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">mysql&gt; desc users;
+------------+------------------+------+-----+---------+----------------+
| Field      | Type             | Null | Key | <span style="color:#66d9ef">Default</span> | Extra          |
+------------+------------------+------+-----+---------+----------------+
| id         | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| name       | varchar(50)      | NO   |     | NULL    |                |
| avatar     | varchar(255)     | NO   |     | NULL    |                |
| status     | tinyint(4)       | NO   |     | 1       |                |
| created_at | timestamp        | YES  |     | NULL    |                |
| updated_at | timestamp        | YES  |     | NULL    |                |
+------------+------------------+------+-----+---------+----------------+
6 rows <span style="color:#66d9ef">in</span> set (0.00 sec)

</code></pre></div><p>第二种命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> <span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名称</span>;
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">mysql&gt; show create table users;
+-------+-----------------------------------------------------------------------+
| Table | Create Table    |
+-------+-----------------------------------------------------------------------+
| users |  CREATE TABLE `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT <span style="color:#e6db74">&#39;昵称&#39;</span>,
  `avatar` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT <span style="color:#e6db74">&#39;头像&#39;</span>,
  `status` tinyint(4) NOT NULL <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;1&#39;</span> COMMENT <span style="color:#e6db74">&#39;状态是否激活 0:禁用  1:激活&#39;</span>,
  `created_at` timestamp NULL <span style="color:#66d9ef">DEFAULT</span> NULL,
  `updated_at` timestamp NULL <span style="color:#66d9ef">DEFAULT</span> NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB <span style="color:#66d9ef">DEFAULT</span> CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci |
+-------+-----------------------------------------------------------------------+
1 row <span style="color:#66d9ef">in</span> set (0.00 sec)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 4. 修改表名<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">rename</span> <span style="color:#66d9ef">to</span> <span style="color:#960050;background-color:#1e0010">新的表名</span>;
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#f92672">`</span>users<span style="color:#f92672">`</span> <span style="color:#66d9ef">rename</span> <span style="color:#66d9ef">to</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">user</span><span style="color:#f92672">`</span>;
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 5. 添加字段<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">add</span> <span style="color:#66d9ef">column</span> <span style="color:#960050;background-color:#1e0010">列名</span> <span style="color:#960050;background-color:#1e0010">属性</span>;
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">user</span><span style="color:#f92672">`</span> <span style="color:#66d9ef">add</span> <span style="color:#66d9ef">column</span> <span style="color:#f92672">`</span>full_name<span style="color:#f92672">`</span> <span style="color:#66d9ef">varchar</span>(<span style="color:#ae81ff">30</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span> <span style="color:#66d9ef">default</span> <span style="color:#e6db74">&#39;匿名用户&#39;</span> comment <span style="color:#e6db74">&#39;显示昵称&#39;</span>;
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 6. 删除字段<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">column</span> <span style="color:#960050;background-color:#1e0010">列名</span>;
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">user</span><span style="color:#f92672">`</span> <span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">column</span> <span style="color:#f92672">`</span>full_name<span style="color:#f92672">`</span>;
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 7. 修改字段属性<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#960050;background-color:#1e0010">表名</span> modify <span style="color:#960050;background-color:#1e0010">列名</span> <span style="color:#960050;background-color:#1e0010">属性</span>; 
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">user</span><span style="color:#f92672">`</span> modify <span style="color:#f92672">`</span>name<span style="color:#f92672">`</span> <span style="color:#66d9ef">varchar</span>(<span style="color:#ae81ff">100</span>) <span style="color:#66d9ef">default</span> <span style="color:#e6db74">&#34;游客&#34;</span> <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span> comment <span style="color:#e6db74">&#34;用户昵称&#34;</span>;
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 8. 添加索引<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#75715e"># 添加普通索引
</span><span style="color:#75715e"></span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">ADD</span> <span style="color:#66d9ef">INDEX</span> <span style="color:#a6e22e">index_name</span> (<span style="color:#960050;background-color:#1e0010">列名</span>)<span style="color:#960050;background-color:#1e0010">；</span>

<span style="color:#75715e"># 添加唯一索引
</span><span style="color:#75715e"></span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">ADD</span> <span style="color:#66d9ef">UNIQUE</span> (<span style="color:#960050;background-color:#1e0010">列名</span>)<span style="color:#960050;background-color:#1e0010">；</span>

<span style="color:#75715e"># 添加主键索引
</span><span style="color:#75715e"></span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">ADD</span> <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (<span style="color:#960050;background-color:#1e0010">列名</span>)<span style="color:#960050;background-color:#1e0010">；</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 9. 删除索引<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">INDEX</span> <span style="color:#960050;background-color:#1e0010">索引名称</span> <span style="color:#66d9ef">ON</span> <span style="color:#960050;background-color:#1e0010">表名</span>;

<span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">INDEX</span> <span style="color:#960050;background-color:#1e0010">索引名称</span>

<span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 10. 查看索引<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> <span style="color:#66d9ef">index</span> <span style="color:#66d9ef">from</span> <span style="color:#960050;background-color:#1e0010">表名</span>;
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">show</span> <span style="color:#66d9ef">index</span> <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">user</span><span style="color:#960050;background-color:#1e0010">\</span>G;
<span style="color:#f92672">***************************</span> <span style="color:#ae81ff">1</span>. row <span style="color:#f92672">***************************</span>
        <span style="color:#66d9ef">Table</span>: <span style="color:#66d9ef">user</span>
   Non_unique: <span style="color:#ae81ff">0</span>
     Key_name: <span style="color:#66d9ef">PRIMARY</span>
 Seq_in_index: <span style="color:#ae81ff">1</span>
  Column_name: id
    Collation: A
  Cardinality: <span style="color:#ae81ff">0</span>
     Sub_part: <span style="color:#66d9ef">NULL</span>
       Packed: <span style="color:#66d9ef">NULL</span>
         <span style="color:#66d9ef">Null</span>:
   Index_type: BTREE
      Comment:
Index_comment:
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

ERROR:
No query specified
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted -->二. 常用SQL语句<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --> 1. date_format日期转换<!-- raw HTML omitted --><!-- raw HTML omitted -->
例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#a6e22e">date_format</span>(created_at, <span style="color:#e6db74">&#39;%Y年%m月%d日&#39;</span>) <span style="color:#66d9ef">as</span> mydate <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">user</span>;
<span style="color:#f92672">+-------------------+</span>
<span style="color:#f92672">|</span> mydate            <span style="color:#f92672">|</span>
<span style="color:#f92672">+-------------------+</span>
<span style="color:#f92672">|</span> <span style="color:#ae81ff">2020</span><span style="color:#960050;background-color:#1e0010">年</span><span style="color:#ae81ff">06</span><span style="color:#960050;background-color:#1e0010">月</span><span style="color:#ae81ff">27</span><span style="color:#960050;background-color:#1e0010">日</span>    <span style="color:#f92672">|</span>
<span style="color:#f92672">+-------------------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 2. 联表查询<!-- raw HTML omitted --><!-- raw HTML omitted -->
例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">desc</span> tags;
<span style="color:#f92672">+------------+--------------+------+-----+---------+----------------+</span>
<span style="color:#f92672">|</span> Field      <span style="color:#f92672">|</span> Type         <span style="color:#f92672">|</span> <span style="color:#66d9ef">Null</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">Key</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">Default</span> <span style="color:#f92672">|</span> Extra          <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+--------------+------+-----+---------+----------------+</span>
<span style="color:#f92672">|</span> id         <span style="color:#f92672">|</span> <span style="color:#66d9ef">int</span>(<span style="color:#ae81ff">20</span>)      <span style="color:#f92672">|</span> NO   <span style="color:#f92672">|</span> PRI <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>    <span style="color:#f92672">|</span> <span style="color:#66d9ef">auto_increment</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> name       <span style="color:#f92672">|</span> <span style="color:#66d9ef">varchar</span>(<span style="color:#ae81ff">255</span>) <span style="color:#f92672">|</span> NO   <span style="color:#f92672">|</span>     <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>    <span style="color:#f92672">|</span>                <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> created_at <span style="color:#f92672">|</span> <span style="color:#66d9ef">timestamp</span>    <span style="color:#f92672">|</span> YES  <span style="color:#f92672">|</span>     <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>    <span style="color:#f92672">|</span>                <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> updated_at <span style="color:#f92672">|</span> <span style="color:#66d9ef">timestamp</span>    <span style="color:#f92672">|</span> YES  <span style="color:#f92672">|</span>     <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>    <span style="color:#f92672">|</span>                <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+--------------+------+-----+---------+----------------+</span>
<span style="color:#ae81ff">4</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">desc</span> videos;
<span style="color:#f92672">+------------+--------------+------+-----+---------+----------------+</span>
<span style="color:#f92672">|</span> Field      <span style="color:#f92672">|</span> Type         <span style="color:#f92672">|</span> <span style="color:#66d9ef">Null</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">Key</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">Default</span> <span style="color:#f92672">|</span> Extra          <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+--------------+------+-----+---------+----------------+</span>
<span style="color:#f92672">|</span> id         <span style="color:#f92672">|</span> <span style="color:#66d9ef">int</span>(<span style="color:#ae81ff">11</span>)      <span style="color:#f92672">|</span> NO   <span style="color:#f92672">|</span> PRI <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>    <span style="color:#f92672">|</span> <span style="color:#66d9ef">auto_increment</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> video_name <span style="color:#f92672">|</span> <span style="color:#66d9ef">varchar</span>(<span style="color:#ae81ff">255</span>) <span style="color:#f92672">|</span> NO   <span style="color:#f92672">|</span>     <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>    <span style="color:#f92672">|</span>                <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> tag_id     <span style="color:#f92672">|</span> <span style="color:#66d9ef">int</span>(<span style="color:#ae81ff">11</span>)      <span style="color:#f92672">|</span> NO   <span style="color:#f92672">|</span>     <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>    <span style="color:#f92672">|</span>                <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> created_at <span style="color:#f92672">|</span> <span style="color:#66d9ef">timestamp</span>    <span style="color:#f92672">|</span> YES  <span style="color:#f92672">|</span>     <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>    <span style="color:#f92672">|</span>                <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> updated_at <span style="color:#f92672">|</span> <span style="color:#66d9ef">timestamp</span>    <span style="color:#f92672">|</span> YES  <span style="color:#f92672">|</span>     <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>    <span style="color:#f92672">|</span>                <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+--------------+------+-----+---------+----------------+</span>
<span style="color:#ae81ff">5</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> a.id <span style="color:#66d9ef">as</span> tag_id,b.video_name,a.name <span style="color:#66d9ef">as</span> tag_name <span style="color:#66d9ef">from</span> tags <span style="color:#66d9ef">as</span> a <span style="color:#66d9ef">join</span> videos <span style="color:#66d9ef">as</span> b <span style="color:#66d9ef">on</span> a.id<span style="color:#f92672">=</span>b.tag_id <span style="color:#66d9ef">limit</span> <span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">\</span>G;
<span style="color:#f92672">***************************</span> <span style="color:#ae81ff">1</span>. row <span style="color:#f92672">***************************</span>
    tag_id: <span style="color:#ae81ff">2</span>
video_name: <span style="color:#960050;background-color:#1e0010">金瓶梅</span>
  tag_name: <span style="color:#960050;background-color:#1e0010">色情</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted -->三. 用户管理与授权管理<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<blockquote>
<p>切换到 mysql 系统db ,执行命令 : <code>use mysql;</code></p>
</blockquote>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --> 1. 创建用户<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">USER</span> <span style="color:#e6db74">&#39;username &#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;host&#39;</span> <span style="color:#66d9ef">IDENTIFIED</span> <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;password&#39;</span>; 
</code></pre></div><p>说明：</p>
<ul>
<li>username : 用户名</li>
<li>host： 指定该用户在哪个主机上可以登录，如果是本机，可以用localhost，如果想让该用户可以从任意远程主机登录，可以使用通配符%</li>
<li>password：用户的登录密码</li>
</ul>
<p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">USER</span> <span style="color:#e6db74">&#39;kwt1&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;localhost&#39;</span> <span style="color:#66d9ef">IDENTIFIED</span> <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;123456&#39;</span>;
<span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">USER</span> <span style="color:#e6db74">&#39;kwt2&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;192.168.1.111&#39;</span> <span style="color:#66d9ef">IDENTIFIED</span> <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;123456&#39;</span>;
<span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">USER</span> <span style="color:#e6db74">&#39;kwt3&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;%&#39;</span> <span style="color:#66d9ef">IDENTIFIED</span> <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;123456&#39;</span>;
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 2. 查看用户信息<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">user</span>, host <span style="color:#66d9ef">FROM</span> <span style="color:#66d9ef">user</span>;
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">user</span>,host <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">user</span>;
<span style="color:#f92672">+------------------+-----------+</span>
<span style="color:#f92672">|</span> <span style="color:#66d9ef">user</span>             <span style="color:#f92672">|</span> host      <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------------+-----------+</span>
<span style="color:#f92672">|</span> homestead        <span style="color:#f92672">|</span> <span style="color:#f92672">%</span>         <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> homestead        <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">0</span>   <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> root             <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">0</span>   <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> debian<span style="color:#f92672">-</span>sys<span style="color:#f92672">-</span>maint <span style="color:#f92672">|</span> localhost <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> kwt1             <span style="color:#f92672">|</span> localhost <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> mysql.session    <span style="color:#f92672">|</span> localhost <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> mysql.sys        <span style="color:#f92672">|</span> localhost <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> root             <span style="color:#f92672">|</span> localhost <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------------+-----------+</span>
<span style="color:#ae81ff">8</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)

</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 3. 授权<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">all</span> <span style="color:#66d9ef">privileges</span> <span style="color:#66d9ef">ON</span> databasename.tablename <span style="color:#66d9ef">TO</span> <span style="color:#e6db74">&#39;username&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;host&#39;</span><span style="color:#960050;background-color:#1e0010">；</span>
<span style="color:#75715e"># 上面的授权命令无法给用户拥有授权的权限，如果想要让用户有授权的权限，可以使用如下命令：
</span><span style="color:#75715e"></span><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">all</span> <span style="color:#66d9ef">privileges</span> <span style="color:#66d9ef">ON</span> databasename.tablename <span style="color:#66d9ef">TO</span> <span style="color:#e6db74">&#39;username&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;host&#39;</span> <span style="color:#66d9ef">WITH</span> <span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">OPTION</span>;


<span style="color:#75715e"># 刷新权限。使用这个命令使得权限生效
</span><span style="color:#75715e"></span><span style="color:#66d9ef">flush</span> <span style="color:#66d9ef">privileges</span>;
</code></pre></div><p>说明：</p>
<ul>
<li>privileges：用户的操作权限，如SELECT、INSERT、UPDATE等，如果要授予所有权限则使用ALL。详细的权限信息可以查看mysql官网文档：<a href="https://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html">Privileges Provided by MySQL</a></li>
<li>databasename：数据库名，如果要授予所有数据库的权限，可以使用*表示</li>
<li>tablename：表名，如果要授予所有表的权限，可以使用*表示</li>
</ul>
<p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">SELECT</span>,<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">on</span> study.<span style="color:#66d9ef">user</span> <span style="color:#66d9ef">TO</span> <span style="color:#e6db74">&#39;kwt1&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;localhost&#39;</span>;

<span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">ALL</span> <span style="color:#66d9ef">on</span> <span style="color:#f92672">*</span>.<span style="color:#f92672">*</span> <span style="color:#66d9ef">TO</span> <span style="color:#e6db74">&#39;kwt1&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;localhost&#39;</span>;
</code></pre></div><blockquote>
<p>如果报错： ERROR 1133 (42000): Can&rsquo;t find any matching row in the user table
说明找不到条件为: User = &lsquo;kwt1&rsquo; AND Host = &lsquo;localhost&rsquo; 的用户</p>
</blockquote>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --> 4. 查看用户授权信息<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> grants <span style="color:#66d9ef">for</span> <span style="color:#e6db74">&#39;username&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;host&#39;</span>;
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">show</span> grants <span style="color:#66d9ef">for</span> <span style="color:#e6db74">&#39;kwt1&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;localhost&#39;</span>;
<span style="color:#f92672">+------------------------------------------+</span>
<span style="color:#f92672">|</span> Grants <span style="color:#66d9ef">for</span> kwt1<span style="color:#f92672">@</span>localhost                <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------------------------------------+</span>
<span style="color:#f92672">|</span> <span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">USAGE</span> <span style="color:#66d9ef">ON</span> <span style="color:#f92672">*</span>.<span style="color:#f92672">*</span> <span style="color:#66d9ef">TO</span> <span style="color:#e6db74">&#39;kwt1&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;localhost&#39;</span> <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------------------------------------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 5. 设置与更改用户密码<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SET</span> PASSWORD <span style="color:#66d9ef">FOR</span> <span style="color:#e6db74">&#39;username&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;host&#39;</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">PASSWORD</span>(<span style="color:#e6db74">&#39;newpassword&#39;</span>);

<span style="color:#75715e"># 如果是当前登录用户：
</span><span style="color:#75715e"></span><span style="color:#66d9ef">SET</span> PASSWORD <span style="color:#f92672">=</span> <span style="color:#a6e22e">PASSWORD</span>(<span style="color:#e6db74">&#39;newpassword&#39;</span>);
</code></pre></div><p>说明：</p>
<ul>
<li>username：用户名</li>
<li>host：登录的主机</li>
<li>newpassword：新密码</li>
</ul>
<p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SET</span> PASSWORD <span style="color:#66d9ef">FOR</span> <span style="color:#e6db74">&#39;kwt1&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;localhost&#39;</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">PASSWORD</span>(<span style="color:#e6db74">&#39;secret&#39;</span>);
Query OK, <span style="color:#ae81ff">0</span> rows affected, <span style="color:#ae81ff">1</span> <span style="color:#a6e22e">warning</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 6. 撤销用户权限<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">REVOKE</span> privelege <span style="color:#66d9ef">ON</span> databasename.tablename <span style="color:#66d9ef">FROM</span> <span style="color:#e6db74">&#39;username&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;host&#39;</span>;
</code></pre></div><p>说明： <a href="#3.3">同第三点授权部分</a></p>
<p>可以通过查询用户授权信息后再撤销</p>
<p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">REVOKE</span> <span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">ON</span> study.<span style="color:#66d9ef">user</span> <span style="color:#66d9ef">FROM</span> <span style="color:#e6db74">&#39;kwt1&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;localhost&#39;</span>;
Query OK, <span style="color:#ae81ff">0</span> rows <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 7. 删除用户<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">USER</span> <span style="color:#e6db74">&#39;username&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;host&#39;</span>
</code></pre></div><p>说明： <a href="#3.3">同第三点授权部分</a></p>
<p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">USER</span> <span style="color:#e6db74">&#39;kwt1&#39;</span><span style="color:#f92672">@</span><span style="color:#e6db74">&#39;localhost&#39;</span>;
Query OK, <span style="color:#ae81ff">0</span> rows <span style="color:#a6e22e">affected</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted -->四. 空间统计命令<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<blockquote>
<p>记得切换到系统数据库 <code>information_schema</code>。 切换命令： <code>use information_schema;</code></p>
</blockquote>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --> 1. 查看各个数据库的数据大小<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">use</span> information_schema;

<span style="color:#66d9ef">select</span> table_schema,<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">sum</span>(data_length)<span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span>,<span style="color:#ae81ff">2</span>),<span style="color:#e6db74">&#39;MB&#39;</span>) <span style="color:#66d9ef">as</span> data <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">tables</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> table_schema;
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> table_schema,<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">sum</span>(data_length)<span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span>,<span style="color:#ae81ff">2</span>),<span style="color:#e6db74">&#39;MB&#39;</span>) <span style="color:#66d9ef">as</span> data <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">tables</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> table_schema;
<span style="color:#f92672">+--------------------+---------+</span>
<span style="color:#f92672">|</span> table_schema       <span style="color:#f92672">|</span> data    <span style="color:#f92672">|</span>
<span style="color:#f92672">+--------------------+---------+</span>
<span style="color:#f92672">|</span> api.canteen        <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">20</span>MB  <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> api.moa            <span style="color:#f92672">|</span> <span style="color:#ae81ff">66</span>.<span style="color:#ae81ff">09</span>MB <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> chat               <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">06</span>MB  <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> information_schema <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">16</span>MB  <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> laravel<span style="color:#f92672">-</span>shop       <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">33</span>MB  <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> mysql              <span style="color:#f92672">|</span> <span style="color:#ae81ff">7</span>.<span style="color:#ae81ff">71</span>MB  <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> performance_schema <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>MB  <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> study              <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">05</span>MB  <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> sys                <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span>MB  <span style="color:#f92672">|</span>
<span style="color:#f92672">+--------------------+---------+</span>
<span style="color:#ae81ff">9</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">03</span> sec)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 2. 查看指定数据库下每个表的数据大小<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> TABLE_NAME,DATA_LENGTH<span style="color:#f92672">+</span>INDEX_LENGTH,TABLE_ROWS,<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">round</span>((DATA_LENGTH<span style="color:#f92672">+</span>INDEX_LENGTH)<span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span>,<span style="color:#ae81ff">2</span>), <span style="color:#e6db74">&#39;MB&#39;</span>) <span style="color:#66d9ef">as</span> data <span style="color:#66d9ef">FROM</span> <span style="color:#66d9ef">TABLES</span> <span style="color:#66d9ef">WHERE</span> TABLE_SCHEMA<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;数据库名&#39;</span>;
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SELECT</span> TABLE_NAME,DATA_LENGTH<span style="color:#f92672">+</span>INDEX_LENGTH,TABLE_ROWS,<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">round</span>((DATA_LENGTH<span style="color:#f92672">+</span>INDEX_LENGTH)<span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span>,<span style="color:#ae81ff">2</span>), <span style="color:#e6db74">&#39;MB&#39;</span>) <span style="color:#66d9ef">as</span> data <span style="color:#66d9ef">FROM</span> <span style="color:#66d9ef">TABLES</span> <span style="color:#66d9ef">WHERE</span> TABLE_SCHEMA<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;study&#39;</span>;
<span style="color:#f92672">+------------+--------------------------+------------+--------+</span>
<span style="color:#f92672">|</span> TABLE_NAME <span style="color:#f92672">|</span> DATA_LENGTH<span style="color:#f92672">+</span>INDEX_LENGTH <span style="color:#f92672">|</span> TABLE_ROWS <span style="color:#f92672">|</span> data   <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+--------------------------+------------+--------+</span>
<span style="color:#f92672">|</span> tags       <span style="color:#f92672">|</span>                    <span style="color:#ae81ff">16384</span> <span style="color:#f92672">|</span>          <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span>MB <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> <span style="color:#66d9ef">user</span>       <span style="color:#f92672">|</span>                    <span style="color:#ae81ff">16384</span> <span style="color:#f92672">|</span>          <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span>MB <span style="color:#f92672">|</span>
<span style="color:#f92672">|</span> videos     <span style="color:#f92672">|</span>                    <span style="color:#ae81ff">16384</span> <span style="color:#f92672">|</span>          <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span>MB <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+--------------------------+------------+--------+</span>
<span style="color:#ae81ff">3</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 3. 查看指定数据库的某个表的数据大小<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span>
	TABLE_NAME,
	<span style="color:#a6e22e">concat</span>( <span style="color:#a6e22e">round</span>( <span style="color:#a6e22e">sum</span>( data_length <span style="color:#f92672">/</span> <span style="color:#ae81ff">1024</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">1024</span> ), <span style="color:#ae81ff">2</span> ), <span style="color:#e6db74">&#39;MB&#39;</span> ) <span style="color:#66d9ef">AS</span> DATA 
<span style="color:#66d9ef">FROM</span>
<span style="color:#66d9ef">TABLES</span> 
<span style="color:#66d9ef">WHERE</span>
	table_schema <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;数据库名&#39;</span> 
	<span style="color:#66d9ef">AND</span> table_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;表名&#39;</span>;
</code></pre></div><p>例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> TABLE_NAME,<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">sum</span>(data_length<span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span>),<span style="color:#ae81ff">2</span>),<span style="color:#e6db74">&#39;MB&#39;</span>) <span style="color:#66d9ef">as</span> data <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">tables</span> <span style="color:#66d9ef">where</span> table_schema<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;study&#39;</span> <span style="color:#66d9ef">and</span> table_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user&#39;</span>;  
<span style="color:#f92672">+------------+--------+</span>
<span style="color:#f92672">|</span> TABLE_NAME <span style="color:#f92672">|</span> data   <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+--------+</span>
<span style="color:#f92672">|</span> <span style="color:#66d9ef">user</span>       <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span>MB <span style="color:#f92672">|</span>
<span style="color:#f92672">+------------+--------+</span>
<span style="color:#ae81ff">1</span> row <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted -->五. 重复数据处理<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<blockquote>
<p>切换到数据库: <code>study</code></p>
</blockquote>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --> 1. 根据单个字段查找表中重复记录<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span>
	<span style="color:#f92672">*</span> 
<span style="color:#66d9ef">FROM</span>
	people 
<span style="color:#66d9ef">WHERE</span>
	peopleId <span style="color:#66d9ef">IN</span> (
	<span style="color:#66d9ef">SELECT</span>
		peopleId 
	<span style="color:#66d9ef">FROM</span>
		people 
	<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span>
		peopleId 
<span style="color:#66d9ef">HAVING</span>
	<span style="color:#a6e22e">count</span>( peopleId ) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 2. 根据单个字段查找表中重复记录，并删除保留1个<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">DELETE</span> 
<span style="color:#66d9ef">FROM</span>
	people 
<span style="color:#66d9ef">WHERE</span>
	peopleId <span style="color:#66d9ef">IN</span> ( <span style="color:#66d9ef">SELECT</span> peopleId <span style="color:#66d9ef">FROM</span> people <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> peopleId <span style="color:#66d9ef">HAVING</span> <span style="color:#a6e22e">count</span>( peopleId ) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> ) 
	<span style="color:#66d9ef">AND</span> rowid <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">IN</span> ( <span style="color:#66d9ef">SELECT</span> <span style="color:#a6e22e">min</span>( rowid ) <span style="color:#66d9ef">FROM</span> people <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> peopleId <span style="color:#66d9ef">HAVING</span> <span style="color:#a6e22e">count</span>( peopleId )<span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> )
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 3. 根据多个字段查找表中重复记录<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span>
	<span style="color:#f92672">*</span> 
<span style="color:#66d9ef">FROM</span>
	vitae a 
<span style="color:#66d9ef">WHERE</span>
	( a.peopleId, a.seq ) <span style="color:#66d9ef">IN</span> (
	<span style="color:#66d9ef">SELECT</span>
		peopleId,
		seq 
	<span style="color:#66d9ef">FROM</span>
		vitae 
	<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span>
		peopleId,
		seq 
	<span style="color:#66d9ef">HAVING</span>
	<span style="color:#a6e22e">count</span>(<span style="color:#f92672">*</span>) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> 
	)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 4. 根据多个字段查找表中重复记录，并删除保留1个<!-- raw HTML omitted --><!-- raw HTML omitted -->
命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">DELETE</span> 
<span style="color:#66d9ef">FROM</span>
	vitae a 
<span style="color:#66d9ef">WHERE</span>
	( a.peopleId, a.seq ) <span style="color:#66d9ef">IN</span> ( <span style="color:#66d9ef">SELECT</span> peopleId, seq <span style="color:#66d9ef">FROM</span> vitae <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> peopleId, seq <span style="color:#66d9ef">HAVING</span> <span style="color:#a6e22e">count</span>(<span style="color:#f92672">*</span>) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> ) 
	<span style="color:#66d9ef">AND</span> rowid <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">IN</span> (
	<span style="color:#66d9ef">SELECT</span>
		<span style="color:#a6e22e">min</span>( rowid ) 
	<span style="color:#66d9ef">FROM</span>
		vitae 
	<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span>
		peopleId,
		seq 
<span style="color:#66d9ef">HAVING</span>
	<span style="color:#a6e22e">count</span>(<span style="color:#f92672">*</span>)<span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted -->六. 备份与恢复<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<blockquote>
<p>注意：以下命令需要退出 mysql 的命令行。以我的环境 <code>homestead</code> 为例， 我选择在家目录执行。 执行： <code>cd ~</code> 。</p>
</blockquote>
<p>关于备份参数：</p>
<pre><code> 1 -A --all-databases：导出全部数据库
 2 -Y --all-tablespaces：导出全部表空间
 3 -y --no-tablespaces：不导出任何表空间信息
 4 --add-drop-database每个数据库创建之前添加drop数据库语句。
 5 --add-drop-table每个数据表创建之前添加drop数据表语句。(默认为打开状态，使用--skip-add-drop-table取消选项)
 6 --add-locks在每个表导出之前增加LOCK TABLES并且之后UNLOCK TABLE。(默认为打开状态，使用--skip-add-locks取消选项)
 7 --comments附加注释信息。默认为打开，可以用--skip-comments取消
 8 --compact导出更少的输出信息(用于调试)。去掉注释和头尾等结构。可以使用选项：--skip-add-drop-table --skip-add-locks --skip-comments --skip-disable-keys
 9 -c --complete-insert：使用完整的insert语句(包含列名称)。这么做能提高插入效率，但是可能会受到max_allowed_packet参数的影响而导致插入失败。
10 -C --compress：在客户端和服务器之间启用压缩传递所有信息
11 -B--databases：导出几个数据库。参数后面所有名字参量都被看作数据库名。
12 --debug输出debug信息，用于调试。默认值为：d:t:o,/tmp/
13 --debug-info输出调试信息并退出
14 --default-character-set设置默认字符集，默认值为utf8
15 --delayed-insert采用延时插入方式（INSERT DELAYED）导出数据
16 -E--events：导出事件。
17 --master-data：在备份文件中写入备份时的binlog文件，在恢复进，增量数据从这个文件之后的日志开始恢复。值为1时，binlog文件名和位置没有注释，为2时，则在备份文件中将binlog的文件名和位置进行注释
18 --flush-logs开始导出之前刷新日志。请注意：假如一次导出多个数据库(使用选项--databases或者--all-databases)，将会逐个数据库刷新日志。除使用--lock-all-tables或者--master-data外。在这种情况下，日志将会被刷新一次，相应的所以表同时被锁定。因此，如果打算同时导出和刷新日志应该使用--lock-all-tables 或者--master-data 和--flush-logs。
19 --flush-privileges在导出mysql数据库之后，发出一条FLUSH PRIVILEGES 语句。为了正确恢复，该选项应该用于导出mysql数据库和依赖mysql数据库数据的任何时候。
20 --force在导出过程中忽略出现的SQL错误。
21 -h --host：需要导出的主机信息
22 --ignore-table不导出指定表。指定忽略多个表时，需要重复多次，每次一个表。每个表必须同时指定数据库和表名。例如：--ignore-table=database.table1 --ignore-table=database.table2 ……
23 -x --lock-all-tables：提交请求锁定所有数据库中的所有表，以保证数据的一致性。这是一个全局读锁，并且自动关闭--single-transaction 和--lock-tables 选项。
24 -l --lock-tables：开始导出前，锁定所有表。用READ LOCAL锁定表以允许MyISAM表并行插入。对于支持事务的表例如InnoDB和BDB，--single-transaction是一个更好的选择，因为它根本不需要锁定表。请注意当导出多个数据库时，--lock-tables分别为每个数据库锁定表。因此，该选项不能保证导出文件中的表在数据库之间的逻辑一致性。不同数据库表的导出状态可以完全不同。
25 --single-transaction：适合innodb事务数据库的备份。保证备份的一致性，原理是设定本次会话的隔离级别为Repeatable read，来保证本次会话（也就是dump）时，不会看到其它会话已经提交了的数据。
26 -F：刷新binlog，如果binlog打开了，-F参数会在备份时自动刷新binlog进行切换。
27 -n --no-create-db：只导出数据，而不添加CREATE DATABASE 语句。
28 -t --no-create-info：只导出数据，而不添加CREATE TABLE 语句。
29 -d --no-data：不导出任何数据，只导出数据库表结构。
30 -p --password：连接数据库密码
31 -P --port：连接数据库端口号
32 -u --user：指定连接的用户名。
</code></pre><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 1. 备份<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->(1) 备份命令格式<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysqldump <span style="color:#f92672">-</span>h <span style="color:#960050;background-color:#1e0010">服务器</span> <span style="color:#f92672">-</span>P端口 <span style="color:#f92672">-</span>u用户名 <span style="color:#f92672">-</span>p密码 <span style="color:#960050;background-color:#1e0010">数据库名</span> <span style="color:#f92672">&gt;</span> <span style="color:#960050;background-color:#1e0010">备份文件</span>.<span style="color:#66d9ef">sql</span>
</code></pre></div><p>例子：</p>
<pre><code>vagrant@homestead:~$ mysqldump -hlocalhost -uhomestead -psecret  study &gt; study_database.sql;
mysqldump: [Warning] Using a password on the command line interface can be insecure.
vagrant@homestead:~$ ls
code  laravel-ubuntu-init  study_database.sql
vagrant@homestead:~$
</code></pre><p><!-- raw HTML omitted --><!-- raw HTML omitted -->(2) 数据库压缩备份<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysqldump <span style="color:#f92672">-</span>h主机名 <span style="color:#f92672">-</span>P端口 <span style="color:#f92672">-</span>u用户名 <span style="color:#f92672">-</span>p密码 <span style="color:#960050;background-color:#1e0010">数据库名</span> <span style="color:#f92672">|</span> gzip <span style="color:#f92672">&gt;</span> backupfile.<span style="color:#66d9ef">sql</span>.gz
</code></pre></div><p>例子：</p>
<pre><code>vagrant@homestead:~$ mysqldump -hlocalhost -uhomestead -psecret  study | gzip &gt; study_backup.sql.gz
mysqldump: [Warning] Using a password on the command line interface can be insecure.
vagrant@homestead:~$ ls
code  laravel-ubuntu-init  study_backup.sql.gz  study_database.sql
</code></pre><p><!-- raw HTML omitted --><!-- raw HTML omitted -->(3) 备份数据库某个(些)表<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysqldump <span style="color:#f92672">-</span>h主机名 <span style="color:#f92672">-</span>u用户名 <span style="color:#f92672">-</span>p密码 <span style="color:#960050;background-color:#1e0010">数据库名</span> <span style="color:#960050;background-color:#1e0010">表名称</span><span style="color:#ae81ff">1</span> <span style="color:#960050;background-color:#1e0010">表名称</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">&gt;</span> backupfile.<span style="color:#66d9ef">sql</span>
</code></pre></div><p>例子：</p>
<pre><code>vagrant@homestead:~$ mysqldump -uhomestead -psecret study user tags &gt; study_some_tables.sql;
mysqldump: [Warning] Using a password on the command line interface can be insecure.
vagrant@homestead:~$ ls
code  laravel-ubuntu-init  study_backup.sql.gz  study_database.sql  study_some_tables.sql
</code></pre><p><!-- raw HTML omitted --><!-- raw HTML omitted -->(4) 同时备份多个数据库<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysqldump <span style="color:#f92672">-</span>h主机名 <span style="color:#f92672">-</span>u用户名 <span style="color:#f92672">-</span>p密码 <span style="color:#f92672">-</span>B <span style="color:#960050;background-color:#1e0010">数据库名字</span><span style="color:#ae81ff">1</span> <span style="color:#960050;background-color:#1e0010">数据库名字</span><span style="color:#ae81ff">2</span> <span style="color:#960050;background-color:#1e0010">数据库名字</span><span style="color:#ae81ff">3</span> <span style="color:#f92672">&gt;</span> <span style="color:#960050;background-color:#1e0010">备份文件</span>.<span style="color:#66d9ef">sql</span>
</code></pre></div><p>例子：</p>
<pre><code>vagrant@homestead:~$ mysqldump -uhomestead  -psecret -B study api.canteen &gt; databases.sql;
mysqldump: [Warning] Using a password on the command line interface can be insecure.
vagrant@homestead:~$ ls
code  databases.sql  laravel-ubuntu-init
</code></pre><p><!-- raw HTML omitted --><!-- raw HTML omitted -->(5) 同时备份多个数据库<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysqldump <span style="color:#f92672">-</span>A <span style="color:#f92672">&gt;</span> allbackupfile.<span style="color:#66d9ef">sql</span>
</code></pre></div><p>例子：</p>
<pre><code>vagrant@homestead:~$ mysqldump -A &gt; allbackupfile.sql
vagrant@homestead:~$ ls
allbackupfile.sql  code  databases.sql  laravel-ubuntu-init
</code></pre><p><!-- raw HTML omitted --><!-- raw HTML omitted --> 1. 恢复<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->(1) 还原数据库的命令<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<pre><code>mysql -h主机名 -u用户名 -p密码 数据库名字 &lt; 备份文件.sql
</code></pre><p>例子：</p>
<pre><code>vagrant@homestead:~$ mysql -uhomestead -psecret study &lt; study_database.sql;
mysql: [Warning] Using a password on the command line interface can be insecure.
</code></pre><p><!-- raw HTML omitted --><!-- raw HTML omitted -->(2) 还原压缩的数据库<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<pre><code>gunzip &lt; 备份文件.sql.gz | mysql -u用户名 -p密码 数据库名字
</code></pre><p>例子：</p>
<pre><code>vagrant@homestead:~$ gunzip &lt; study_backup.sql.gz | mysql -uhomestead -psecret study;
mysql: [Warning] Using a password on the command line interface can be insecure.
</code></pre><p><!-- raw HTML omitted --><!-- raw HTML omitted -->(3) 数据库复制<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<blockquote>
<p>首先，在 mysql 里面需要有 <code>study</code> 和 <code>new_study</code> 两个数据库。</p>
</blockquote>
<pre><code># 假设已存在数据库名为 old_db，想要复制一份到新的数据库，命名为new_db，命令如下：
mysqldump old_db -u用户名 -p密码 --add-drop-table | mysql new_db -u用户名 -p密码
</code></pre><p>例子：</p>
<pre><code>vagrant@homestead:~$ mysqldump study -uhomestead -psecret --add-drop-table | mysql new_study -uhomestead -psecret
mysql: [Warning] Using a password on the command line interface can be insecure.
mysqldump: [Warning] Using a password on the command line interface can be insecure.
</code></pre><p><!-- raw HTML omitted --><!-- raw HTML omitted -->(4) source导入数据库<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<blockquote>
<p>需要进入到数据库的命令行。</p>
</blockquote>
<pre><code>mysql&gt; source 文件的绝对路径.sql
</code></pre><p>例子：</p>
<pre><code>mysql&gt; source /home/vagrant/study_database.sql
</code></pre><p><!-- raw HTML omitted --><!-- raw HTML omitted -->(5) 恢复binlog文件<!-- raw HTML omitted --><!-- raw HTML omitted -->
例子:</p>
<pre><code>mysqlbinlog bin-log.000002 |mysql -hx.x.x.x -utest2 -p123  -P3310  
</code></pre><p>转载自：<a href="https://shuwoom.com/?p=3225">MYSQL常用命令整理</a></p>

        </div>

        <div class="row middle-xs">
          <div class="col-xs-12">
            
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            
          </div>
        </div>

        
        

        
        
        <div style="height: 50px;"></div>
        
        <div class="post-comments">
          <div id="disqus_thread"></div>
<script>
  window.addEventListener("load", () => {
    (function() {
      
      var d = document,
        s = d.createElement("script");
      s.src = "https://特污兔.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  });
</script>
<noscript
  >Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript"
    >comments powered by Disqus.</a
  ></noscript
>

        </div>
        
        

        <div class="site-footer">
  
  <div class="site-footer-item">
    <a href="/about/" target="_blank">关于我</a>
  </div>
  
  <div class="site-footer-item">
    <a href="https://github.com/liaoshanjin" target="_blank">Github</a>
  </div>
  
  
</div>

      </div>
    </div>
  </article>

  <script src="/js/highlight.pack.js"></script>


<script>
  hljs.initHighlightingOnLoad();
  
  
  
    
    
  
</script>

  

</body>

</html>