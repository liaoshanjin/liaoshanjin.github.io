<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Hugo 0.75.1" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="苦味糖" />
  <meta property="og:url" content="https://liaoshanjin.github.io/others/postman-phpunit/" />
  <link rel="canonical" href="https://liaoshanjin.github.io/others/postman-phpunit/" /><link rel="alternate" type="application/atom+xml" href="https://liaoshanjin.github.ioindex.xml" title="苦味糖的博客">

  <script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/liaoshanjin.github.io"
      },
      "articleSection" : "others",
      "name" : "PostMan 自动化测试",
      "headline" : "PostMan 自动化测试",
      "description" : "第三方黑盒测试 第三方黑盒测试的好处是可以最大程度测试 整套系统，我们的 API 接口，从 PHP 代码解析开始，以下涉及因素都会影响到接口的可用性：\n 软件代码级别的错误； 程序使用的第三方软件发生错误，如：Redis 缓存和队列系统、MySQL 数据库等； API 服务器上的系统软件，如 Nginx 、Cron 等； API 服务器上的物理问题，如硬盘坏了； 域名解析问题，如 DNS 解析出错；  代码级别的自动化测试，能测试的范围有限。而第三方黑盒测试，模拟的是真实用户的请求，将 API 服务器看成 完全的系统，系统里任何一个部件坏了，都能被检测出来。并且这种测试方法与服务器端环境彻底解耦，后期维护成本较低。\nPostMan 自动化测试 PostMan 为我们提供了自动化测试的功能，类似于 Laravel 的接口测试，PostMan 可以请求接口，并且断言响应结果和响应数据，接下来我们以 发布话题 和 话题列表 两个接口为例，进行自动化测试。\n测试添加权限 打开 添加权限 接口，可以看到有个 Tests 的选项卡，点击该选项卡会出现一个空白区域，在这里我们可以添加一些断言，判断请求结果。\n填入如下内容：\npm.test(\u0026quot;响应状态码正确\u0026quot;, function(){ pm.response.to.have.status(201); }); pm.test(\u0026quot;接口响应数据正确\u0026quot;, function() { pm.expect(pm.response.text()).to.include(\u0026quot;name\u0026quot;); pm.expect(pm.response.text()).to.include(\u0026quot;display_name\u0026quot;); pm.expect(pm.response.text()).to.include(\u0026quot;description\u0026quot;); }); PostMan 为我们提供了 pm.test 方法，相当于一个测试用例，第一个参数是执行正确后的提示文字，第二个参数是个闭包，执行我们的断言。\n第一个测试用户我们判断响应的状态码，pm.response.to.have.status(201); 断言响应结果的状态码是 201。\n第二个测试用户，我们判断响应数据，通过 pm.expect(pm.response.text()).to.include(\u0026quot;\u0026quot;); 断言响应数据中一定会包含某个字段。\n点击 Send 进行调试。\n切换到 Test Results，可以看到两个测试用例均通过了。",
      "inLanguage" : "en-US",
      "author" : "苦味糖",
      "creator" : "苦味糖",
      "publisher": "苦味糖",
      "accountablePerson" : "苦味糖",
      "copyrightHolder" : "苦味糖",
      "copyrightYear" : "2019",
      "datePublished": "2019-10-24 17:01:46 \u002b0800 CST",
      "dateModified" : "2019-10-24 17:01:46 \u002b0800 CST",
      "url" : "https:\/\/liaoshanjin.github.io\/others\/postman-phpunit\/",
      "keywords" : [  ]
  }
</script>
<title>PostMan 自动化测试 - 苦味糖的博客</title>
  <meta property="og:title" content="PostMan 自动化测试 - 苦味糖的博客" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="第三方黑盒测试 第三方黑盒测试的好处是可以最大程度测试 整套系统，我们的 API 接口，从 PHP 代码解析开始，以下涉及因素都会影响到接口的可用性：
 软件代码级别的错误； 程序使用的第三方软件发生错误，如：Redis 缓存和队列系统、MySQL 数据库等； API 服务器上的系统软件，如 Nginx 、Cron 等； API 服务器上的物理问题，如硬盘坏了； 域名解析问题，如 DNS 解析出错；  代码级别的自动化测试，能测试的范围有限。而第三方黑盒测试，模拟的是真实用户的请求，将 API 服务器看成 完全的系统，系统里任何一个部件坏了，都能被检测出来。并且这种测试方法与服务器端环境彻底解耦，后期维护成本较低。
PostMan 自动化测试 PostMan 为我们提供了自动化测试的功能，类似于 Laravel 的接口测试，PostMan 可以请求接口，并且断言响应结果和响应数据，接下来我们以 发布话题 和 话题列表 两个接口为例，进行自动化测试。
测试添加权限 打开 添加权限 接口，可以看到有个 Tests 的选项卡，点击该选项卡会出现一个空白区域，在这里我们可以添加一些断言，判断请求结果。
填入如下内容：
pm.test(&quot;响应状态码正确&quot;, function(){ pm.response.to.have.status(201); }); pm.test(&quot;接口响应数据正确&quot;, function() { pm.expect(pm.response.text()).to.include(&quot;name&quot;); pm.expect(pm.response.text()).to.include(&quot;display_name&quot;); pm.expect(pm.response.text()).to.include(&quot;description&quot;); }); PostMan 为我们提供了 pm.test 方法，相当于一个测试用例，第一个参数是执行正确后的提示文字，第二个参数是个闭包，执行我们的断言。
第一个测试用户我们判断响应的状态码，pm.response.to.have.status(201); 断言响应结果的状态码是 201。
第二个测试用户，我们判断响应数据，通过 pm.expect(pm.response.text()).to.include(&quot;&quot;); 断言响应数据中一定会包含某个字段。
点击 Send 进行调试。
切换到 Test Results，可以看到两个测试用例均通过了。" />
  <meta name="description" content="第三方黑盒测试 第三方黑盒测试的好处是可以最大程度测试 整套系统，我们的 API 接口，从 PHP 代码解析开始，以下涉及因素都会影响到接口的可用性：
 软件代码级别的错误； 程序使用的第三方软件发生错误，如：Redis 缓存和队列系统、MySQL 数据库等； API 服务器上的系统软件，如 Nginx 、Cron 等； API 服务器上的物理问题，如硬盘坏了； 域名解析问题，如 DNS 解析出错；  代码级别的自动化测试，能测试的范围有限。而第三方黑盒测试，模拟的是真实用户的请求，将 API 服务器看成 完全的系统，系统里任何一个部件坏了，都能被检测出来。并且这种测试方法与服务器端环境彻底解耦，后期维护成本较低。
PostMan 自动化测试 PostMan 为我们提供了自动化测试的功能，类似于 Laravel 的接口测试，PostMan 可以请求接口，并且断言响应结果和响应数据，接下来我们以 发布话题 和 话题列表 两个接口为例，进行自动化测试。
测试添加权限 打开 添加权限 接口，可以看到有个 Tests 的选项卡，点击该选项卡会出现一个空白区域，在这里我们可以添加一些断言，判断请求结果。
填入如下内容：
pm.test(&quot;响应状态码正确&quot;, function(){ pm.response.to.have.status(201); }); pm.test(&quot;接口响应数据正确&quot;, function() { pm.expect(pm.response.text()).to.include(&quot;name&quot;); pm.expect(pm.response.text()).to.include(&quot;display_name&quot;); pm.expect(pm.response.text()).to.include(&quot;description&quot;); }); PostMan 为我们提供了 pm.test 方法，相当于一个测试用例，第一个参数是执行正确后的提示文字，第二个参数是个闭包，执行我们的断言。
第一个测试用户我们判断响应的状态码，pm.response.to.have.status(201); 断言响应结果的状态码是 201。
第二个测试用户，我们判断响应数据，通过 pm.expect(pm.response.text()).to.include(&quot;&quot;); 断言响应数据中一定会包含某个字段。
点击 Send 进行调试。
切换到 Test Results，可以看到两个测试用例均通过了。" />
  <meta property="og:locale" content="zh_CN" />

  <link rel="stylesheet" href="/css/flexboxgrid-6.3.1.min.css" />
  <link rel="stylesheet" href="/css/github-markdown.css" />
  <link rel="stylesheet" href="/css/highlight/tomorrow.min.css" />
  <link rel="stylesheet" href="/css/index.css">
  <link href="/index.xml" rel="alternate" type="application/rss+xml"
    title="苦味糖的博客">
  
  <link href="https://fonts.googleapis.com/css?family=Arvo|Permanent+Marker|Bree+Serif" rel="stylesheet">
  
  

  
</head>

<body>
  <article class="post " id="article">
    <div class="row">
      <div class="col-xs-12">
        <div class="site-header">
          
<header>
  <div class="signatures site-title">
    <a href="/">苦味糖的博客</a>
  </div>
</header>
<div class="row end-xs">
  
  
</div>
<div class="header-line"></div>

        </div>
        <header class="post-header">
          <h1 class="post-title">PostMan 自动化测试</h1>
          
          <div class="row post-desc">
            <div class="col-xs-6">
              
              <time class="post-date" datetime="2019-10-24 17:01:46 CST">
                24 Oct 2019
              </time>
              
            </div>
            <div class="col-xs-6">
              
              <div class="post-author">
                <a target="_blank" href="https://liaoshanjin.github.io/">@苦味糖</a>
              </div>
              
            </div>
          </div>
          
        </header>

        <div class="post-content markdown-body">
          
          <h2 id="第三方黑盒测试">第三方黑盒测试</h2>
<p>第三方黑盒测试的好处是可以最大程度测试 <strong>整套系统</strong>，我们的 <code>API</code> 接口，从 <code>PHP</code> 代码解析开始，以下涉及因素都会影响到接口的可用性：</p>
<ol>
<li>软件代码级别的错误；</li>
<li>程序使用的第三方软件发生错误，如：<code>Redis</code> 缓存和队列系统、<code>MySQL</code> 数据库等；</li>
<li><code>API</code> 服务器上的系统软件，如 <code>Nginx</code> 、<code>Cron</code> 等；</li>
<li><code>API</code> 服务器上的物理问题，如硬盘坏了；</li>
<li>域名解析问题，如 <code>DNS</code> 解析出错；</li>
</ol>
<p>代码级别的自动化测试，能测试的范围有限。而第三方黑盒测试，模拟的是真实用户的请求，将 <code>API</code> 服务器看成 <strong>完全的系统</strong>，系统里任何一个部件坏了，都能被检测出来。并且这种测试方法与服务器端环境彻底解耦，后期维护成本较低。</p>
<h3 id="postman-自动化测试"><code>PostMan</code> 自动化测试</h3>
<p><code>PostMan</code> 为我们提供了自动化测试的功能，类似于 <code>Laravel</code> 的接口测试，<code>PostMan</code> 可以请求接口，并且断言响应结果和响应数据，接下来我们以 <code>发布话题</code> 和 <code>话题列表</code> 两个接口为例，进行自动化测试。</p>
<h4 id="测试添加权限">测试添加权限</h4>
<p>打开 <code>添加权限</code> 接口，可以看到有个 <code>Tests</code> 的选项卡，点击该选项卡会出现一个空白区域，在这里我们可以添加一些断言，判断请求结果。</p>
<p><img src="http://148.70.84.101/storage/article/2019/07/04/phQOmnd6jFwa7nvjzKjZsUOPdG2adICWAr7NJbTQ.png" alt="1562226164251.png"></p>
<p>填入如下内容：</p>
<pre><code>pm.test(&quot;响应状态码正确&quot;, function(){
    pm.response.to.have.status(201);
});


pm.test(&quot;接口响应数据正确&quot;, function() {
    pm.expect(pm.response.text()).to.include(&quot;name&quot;);
    pm.expect(pm.response.text()).to.include(&quot;display_name&quot;);
    pm.expect(pm.response.text()).to.include(&quot;description&quot;);
});
</code></pre><p><code>PostMan</code> 为我们提供了 <code>pm.test</code> 方法，相当于一个测试用例，第一个参数是执行正确后的提示文字，第二个参数是个闭包，执行我们的断言。</p>
<p>第一个测试用户我们判断响应的状态码，<code>pm.response.to.have.status(201);</code> 断言响应结果的状态码是 <code>201</code>。</p>
<p>第二个测试用户，我们判断响应数据，通过 <code>pm.expect(pm.response.text()).to.include(&quot;&quot;);</code> 断言响应数据中一定会包含某个字段。</p>
<p>点击 <code>Send</code> 进行调试。</p>
<p><img src="http://148.70.84.101/storage/article/2019/07/04/mogSQZboCxiMqOjsx5bi0RkgJEQuQQNQIfQgokZI.png" alt="1562227527376.png"></p>
<p>切换到 <code>Test Results</code>，可以看到两个测试用例均通过了。</p>
<h4 id="测试权限列表">测试权限列表</h4>
<p>同样的，我们为 <code>权限列表</code> 接口增加测试用例：</p>
<pre><code>pm.test(&quot;响应状态码正确&quot;, function(){
    pm.response.to.have.status(200);
});


pm.test(&quot;接口响应数据正确&quot;, function() {
    pm.expect(pm.response.text()).to.include(&quot;name&quot;);
    pm.expect(pm.response.text()).to.include(&quot;display_name&quot;);
    pm.expect(pm.response.text()).to.include(&quot;description&quot;);
});
</code></pre><p>同样增加了两个测试用例，断言响应状态码为 <code>200</code>，断言响应数据中包含 <code>name</code> 和 <code>display_name</code> 、 <code>description</code>。</p>
<p>点击 <code>Send</code> 进行调试。</p>
<p><img src="http://148.70.84.101/storage/article/2019/07/04/mogSQZboCxiMqOjsx5bi0RkgJEQuQQNQIfQgokZI.png" alt="1562227527376.png"></p>
<p>切换到 <code>Test Results</code>，可以看到两个测试用例均通过了。</p>
<h4 id="批量测试">批量测试</h4>
<p>每个接口都完成测试用户后，我们就可以通过 <code>PostMan</code> 的测试工具进行自动化测试了。</p>
<p><img src="http://148.70.84.101/storage/article/2019/07/04/ioQSy78nJR6myRNL46JeusDUM2wsJjMUsbaXUzTq.png" alt="1562229407470.png"></p>
<p>点击 <code>PostMan</code> 左上角的 <code>Runner</code>，我们可以看到 <code>PostMan</code> 的自动化测试界面，我们可以选择测试整个项目，或者测试某个目录。这里我们选择 <code>权限管理</code> 目录，执行测试。</p>
<p><img src="http://148.70.84.101/storage/article/2019/07/04/SSVfNQQUNFcXiZKQja1GtgWjR52Iwyb4oJ0OeO1M.png" alt="1562229498178.png"></p>
<p>我们可以看到 <code>PostMan</code> 依次请求了 <code>权限管理</code> 目录下的所有接口，因为我们为 <code>添加权限</code> 和 <code>权限列表</code> 添加了测试用例和断言，所以看到这两个接口的测试用户均已通过。</p>
<p><img src="http://148.70.84.101/storage/article/2019/07/04/acY0OaECqnv3ssymNW0qhAcjhEmXWc1PVmOdBWyc.png" alt="1562229762362.png"></p>
<p>我们可以为所有的接口增加测试用例，这样当接口升级之后，可以方便的通过 <code>PostMan</code> 的自动化测试工具进行测试，快速定位不符合预期的接口。</p>

        </div>

        <div class="row middle-xs">
          <div class="col-xs-12">
            
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            
          </div>
        </div>

        
        

        
        
        <div style="height: 50px;"></div>
        
        <div class="post-comments">
          <div id="disqus_thread"></div>
<script>
  window.addEventListener("load", () => {
    (function() {
      
      var d = document,
        s = d.createElement("script");
      s.src = "https://苦味糖.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  });
</script>
<noscript
  >Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript"
    >comments powered by Disqus.</a
  ></noscript
>

        </div>
        
        

        <div class="site-footer">
  
  <div class="site-footer-item">
    <a href="/about/" target="_blank">关于我</a>
  </div>
  
  <div class="site-footer-item">
    <a href="https://github.com/liaoshanjin" target="_blank">Github</a>
  </div>
  
  
</div>

      </div>
    </div>
  </article>

  <script src="/js/highlight.pack.js"></script>


<script>
  hljs.initHighlightingOnLoad();
  
  
  
    
    
  
</script>

  

</body>

</html>