<!DOCTYPE html>
<html lang="zh_CN">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Stringer">
    <meta name="description" content="stringer 的个人博客">
    <meta name="keywords" content="php,go,程序员">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="PostMan 自动化测试"/>
<meta name="twitter:description" content="第三方黑盒测试 第三方黑盒测试的好处是可以最大程度测试 整套系统，我们的 API 接口，从 PHP 代码解析开始，以下涉及因素都会影响到接口的可用性：
 软件代码级别的错误； 程序使用的第三方软件发生错误，如：Redis 缓存和队列系统、MySQL 数据库等； API 服务器上的系统软件，如 Nginx 、Cron 等； API 服务器上的物理问题，如硬盘坏了； 域名解析问题，如 DNS 解析出错；  代码级别的自动化测试，能测试的范围有限。而第三方黑盒测试，模拟的是真实用户的请求，将 API 服务器看成 完全的系统，系统里任何一个部件坏了，都能被检测出来。并且这种测试方法与服务器端环境彻底解耦，后期维护成本较低。
PostMan 自动化测试 PostMan 为我们提供了自动化测试的功能，类似于 Laravel 的接口测试，PostMan 可以请求接口，并且断言响应结果和响应数据，接下来我们以 发布话题 和 话题列表 两个接口为例，进行自动化测试。
测试添加权限 打开 添加权限 接口，可以看到有个 Tests 的选项卡，点击该选项卡会出现一个空白区域，在这里我们可以添加一些断言，判断请求结果。
填入如下内容：
pm.test(&#34;响应状态码正确&#34;, function(){ pm.response.to.have.status(201); }); pm.test(&#34;接口响应数据正确&#34;, function() { pm.expect(pm.response.text()).to.include(&#34;name&#34;); pm.expect(pm.response.text()).to.include(&#34;display_name&#34;); pm.expect(pm.response.text()).to.include(&#34;description&#34;); }); PostMan 为我们提供了 pm.test 方法，相当于一个测试用例，第一个参数是执行正确后的提示文字，第二个参数是个闭包，执行我们的断言。
第一个测试用户我们判断响应的状态码，pm.response.to.have.status(201); 断言响应结果的状态码是 201。
第二个测试用户，我们判断响应数据，通过 pm.expect(pm.response.text()).to.include(&quot;&quot;); 断言响应数据中一定会包含某个字段。
点击 Send 进行调试。"/>

    <meta property="og:title" content="PostMan 自动化测试" />
<meta property="og:description" content="第三方黑盒测试 第三方黑盒测试的好处是可以最大程度测试 整套系统，我们的 API 接口，从 PHP 代码解析开始，以下涉及因素都会影响到接口的可用性：
 软件代码级别的错误； 程序使用的第三方软件发生错误，如：Redis 缓存和队列系统、MySQL 数据库等； API 服务器上的系统软件，如 Nginx 、Cron 等； API 服务器上的物理问题，如硬盘坏了； 域名解析问题，如 DNS 解析出错；  代码级别的自动化测试，能测试的范围有限。而第三方黑盒测试，模拟的是真实用户的请求，将 API 服务器看成 完全的系统，系统里任何一个部件坏了，都能被检测出来。并且这种测试方法与服务器端环境彻底解耦，后期维护成本较低。
PostMan 自动化测试 PostMan 为我们提供了自动化测试的功能，类似于 Laravel 的接口测试，PostMan 可以请求接口，并且断言响应结果和响应数据，接下来我们以 发布话题 和 话题列表 两个接口为例，进行自动化测试。
测试添加权限 打开 添加权限 接口，可以看到有个 Tests 的选项卡，点击该选项卡会出现一个空白区域，在这里我们可以添加一些断言，判断请求结果。
填入如下内容：
pm.test(&#34;响应状态码正确&#34;, function(){ pm.response.to.have.status(201); }); pm.test(&#34;接口响应数据正确&#34;, function() { pm.expect(pm.response.text()).to.include(&#34;name&#34;); pm.expect(pm.response.text()).to.include(&#34;display_name&#34;); pm.expect(pm.response.text()).to.include(&#34;description&#34;); }); PostMan 为我们提供了 pm.test 方法，相当于一个测试用例，第一个参数是执行正确后的提示文字，第二个参数是个闭包，执行我们的断言。
第一个测试用户我们判断响应的状态码，pm.response.to.have.status(201); 断言响应结果的状态码是 201。
第二个测试用户，我们判断响应数据，通过 pm.expect(pm.response.text()).to.include(&quot;&quot;); 断言响应数据中一定会包含某个字段。
点击 Send 进行调试。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://liaoshanjin.github.io/others/postman-phpunit/" />
<meta property="article:published_time" content="2019-10-24T17:01:46+08:00" />
<meta property="article:modified_time" content="2019-10-24T17:01:46+08:00" />


    
      <base href="https://liaoshanjin.github.io/others/postman-phpunit/">
    
    <title>
  PostMan 自动化测试 · Stringer 的博客
</title>

    
      <link rel="canonical" href="https://liaoshanjin.github.io/others/postman-phpunit/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://liaoshanjin.github.io/css/coder.min.28d751104f30c16da1aa1bb04015cbe662cacfe0d1b01af4f2240ad58580069c.css" integrity="sha256-KNdREE8wwW2hqhuwQBXL5mLKz&#43;DRsBr08iQK1YWABpw=" crossorigin="anonymous" media="screen" />
    

    

    

    
      <link rel="stylesheet" href="https://liaoshanjin.github.io/css/custom.css" />
    

    
    
    <link rel="icon" type="image/png" href="https://liaoshanjin.github.io/img/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://liaoshanjin.github.io/img/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.59.0" />
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://liaoshanjin.github.io/">
      Stringer 的博客
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://liaoshanjin.github.io/laravel/">Laravel</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://liaoshanjin.github.io/go/">GO</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://liaoshanjin.github.io/mysql/">MySQL</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://liaoshanjin.github.io/others/">其他</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://liaoshanjin.github.io/about/">关于</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>PostMan 自动化测试</h1>
    </header>

    

<h2 id="第三方黑盒测试">第三方黑盒测试</h2>

<p>第三方黑盒测试的好处是可以最大程度测试 <strong>整套系统</strong>，我们的 <code>API</code> 接口，从 <code>PHP</code> 代码解析开始，以下涉及因素都会影响到接口的可用性：</p>

<ol>
<li>软件代码级别的错误；</li>
<li>程序使用的第三方软件发生错误，如：<code>Redis</code> 缓存和队列系统、<code>MySQL</code> 数据库等；</li>
<li><code>API</code> 服务器上的系统软件，如 <code>Nginx</code> 、<code>Cron</code> 等；</li>
<li><code>API</code> 服务器上的物理问题，如硬盘坏了；</li>
<li>域名解析问题，如 <code>DNS</code> 解析出错；</li>
</ol>

<p>代码级别的自动化测试，能测试的范围有限。而第三方黑盒测试，模拟的是真实用户的请求，将 <code>API</code> 服务器看成 <strong>完全的系统</strong>，系统里任何一个部件坏了，都能被检测出来。并且这种测试方法与服务器端环境彻底解耦，后期维护成本较低。</p>

<h3 id="postman-自动化测试"><code>PostMan</code> 自动化测试</h3>

<p><code>PostMan</code> 为我们提供了自动化测试的功能，类似于 <code>Laravel</code> 的接口测试，<code>PostMan</code> 可以请求接口，并且断言响应结果和响应数据，接下来我们以 <code>发布话题</code> 和 <code>话题列表</code> 两个接口为例，进行自动化测试。</p>

<h4 id="测试添加权限">测试添加权限</h4>

<p>打开 <code>添加权限</code> 接口，可以看到有个 <code>Tests</code> 的选项卡，点击该选项卡会出现一个空白区域，在这里我们可以添加一些断言，判断请求结果。</p>

<p><img src="http://148.70.84.101/storage/article/2019/07/04/phQOmnd6jFwa7nvjzKjZsUOPdG2adICWAr7NJbTQ.png" alt="1562226164251.png" /></p>

<p>填入如下内容：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">pm.test(&#34;响应状态码正确&#34;, function(){
    pm.response.to.have.status(201);
});


pm.test(&#34;接口响应数据正确&#34;, function() {
    pm.expect(pm.response.text()).to.include(&#34;name&#34;);
    pm.expect(pm.response.text()).to.include(&#34;display_name&#34;);
    pm.expect(pm.response.text()).to.include(&#34;description&#34;);
});</pre></div>
<p><code>PostMan</code> 为我们提供了 <code>pm.test</code> 方法，相当于一个测试用例，第一个参数是执行正确后的提示文字，第二个参数是个闭包，执行我们的断言。</p>

<p>第一个测试用户我们判断响应的状态码，<code>pm.response.to.have.status(201);</code> 断言响应结果的状态码是 <code>201</code>。</p>

<p>第二个测试用户，我们判断响应数据，通过 <code>pm.expect(pm.response.text()).to.include(&quot;&quot;);</code> 断言响应数据中一定会包含某个字段。</p>

<p>点击 <code>Send</code> 进行调试。</p>

<p><img src="http://148.70.84.101/storage/article/2019/07/04/mogSQZboCxiMqOjsx5bi0RkgJEQuQQNQIfQgokZI.png" alt="1562227527376.png" /></p>

<p>切换到 <code>Test Results</code>，可以看到两个测试用例均通过了。</p>

<h4 id="测试权限列表">测试权限列表</h4>

<p>同样的，我们为 <code>权限列表</code> 接口增加测试用例：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">pm.test(&#34;响应状态码正确&#34;, function(){
    pm.response.to.have.status(200);
});


pm.test(&#34;接口响应数据正确&#34;, function() {
    pm.expect(pm.response.text()).to.include(&#34;name&#34;);
    pm.expect(pm.response.text()).to.include(&#34;display_name&#34;);
    pm.expect(pm.response.text()).to.include(&#34;description&#34;);
});</pre></div>
<p>同样增加了两个测试用例，断言响应状态码为 <code>200</code>，断言响应数据中包含 <code>name</code> 和 <code>display_name</code> 、 <code>description</code>。</p>

<p>点击 <code>Send</code> 进行调试。</p>

<p><img src="http://148.70.84.101/storage/article/2019/07/04/mogSQZboCxiMqOjsx5bi0RkgJEQuQQNQIfQgokZI.png" alt="1562227527376.png" /></p>

<p>切换到 <code>Test Results</code>，可以看到两个测试用例均通过了。</p>

<h4 id="批量测试">批量测试</h4>

<p>每个接口都完成测试用户后，我们就可以通过 <code>PostMan</code> 的测试工具进行自动化测试了。</p>

<p><img src="http://148.70.84.101/storage/article/2019/07/04/ioQSy78nJR6myRNL46JeusDUM2wsJjMUsbaXUzTq.png" alt="1562229407470.png" /></p>

<p>点击 <code>PostMan</code> 左上角的 <code>Runner</code>，我们可以看到 <code>PostMan</code> 的自动化测试界面，我们可以选择测试整个项目，或者测试某个目录。这里我们选择 <code>权限管理</code> 目录，执行测试。</p>

<p><img src="http://148.70.84.101/storage/article/2019/07/04/SSVfNQQUNFcXiZKQja1GtgWjR52Iwyb4oJ0OeO1M.png" alt="1562229498178.png" /></p>

<p>我们可以看到 <code>PostMan</code> 依次请求了 <code>权限管理</code> 目录下的所有接口，因为我们为 <code>添加权限</code> 和 <code>权限列表</code> 添加了测试用例和断言，所以看到这两个接口的测试用户均已通过。</p>

<p><img src="http://148.70.84.101/storage/article/2019/07/04/acY0OaECqnv3ssymNW0qhAcjhEmXWc1PVmOdBWyc.png" alt="1562229762362.png" /></p>

<p>我们可以为所有的接口增加测试用例，这样当接口升级之后，可以方便的通过 <code>PostMan</code> 的自动化测试工具进行测试，快速定位不符合预期的接口。</p>

  </article>
</section>


      </div>

      <footer class="footer">
  <section class="container">
    
      <p>Enter a text here.</p>
    
     © 2020
    
       · 
       <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
    
  </section>
</footer>

    </main>

    

  </body>

</html>
